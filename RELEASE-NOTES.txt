Release Notes -- Apache Jackrabbit Core -- Version 1.4.6

Introduction
------------

This is the 1.4.6 patch release of the jackrabbit-core component of
Apache Jackrabbit, a fully conforming implementation of the Content
Repository for Java Technology API (JCR).

This release fixes a number of issues. See below for the full list of
changes in this release.

See the Apache Jackrabbit website at http://jackrabbit.apache.org/ for
more information.

Release Contents
----------------

Unlike previous Jackrabbit releases that contained a full set of components,
this patch release only contains the jackrabbit-core component. The component
is distributed both as a source archive and a pre-compiled binary.

    * Source archive (jackrabbit-core-1.4.6-src.jar)

        The source archive contains the full source code of this release
        in a "jackrabbit-core-1.4.6" directory. Use the following commands
        (or the equivalent in your environment) to build the component
        with Maven 2 and Java 1.4 or higher:

          $ jar xf jackrabbit-core-1.4.6-src.jar
          $ cd jackrabbit-core-1.4.6
          $ mvn install

    * Pre-compiled binary (jackrabbit-core-1.4.6.jar)

        Core of the Apache Jackrabbit content repository implementation.

See the included README.txt file for more information.

Each release file is accompanied by SHA1 and MD5 checksums and a PGP
signature. The public key used for the signatures can be found
in the KEYS file.

Changes and known issues in this release
----------------------------------------

All the changes and known issues in this release are listed below.
The issue identifier and title is listed for each change and known issue.
You can look up individual issues for more details in the Jackrabbit
issue tracker at http://issues.apache.org/jira/browse/JCR

  Bug fixes
  [JCR-1362] DatabaseJournal improperly finds tables in external schemas ...
  [JCR-1632] Mixin type loss
  [JCR-1644] make NamespaceContext#getPrefix(java.lang.String) iterative ...
  [JCR-1650] XPathQueryBuilder may not handle multiple jcr:deref correctly
  [JCR-1651] Node.addNode(String, String) doesn't prevent use of mixin ...
  [JCR-1657] Cluster revision entries should be retrieved in order
  [JCR-1664] JNDI Referencable Issues
  [JCR-1687] NamespaceRegistryImpl.getNameResolver/getPathResolver always ...
  [JCR-1701] InfiniteLoop in bundle binding
  [JCR-1704] Indexing rules inheritance doesn't work
  [JCR-1708] Impossible to import a string containing _x0020_ with ...
  [JCR-1728] Observation logs error when a node is moved in place
  [JCR-1730] Background text extraction not possible when ...
  [JCR-1731] Session.checkPermission("/", "add_node") throws ...
  [JCR-1755] ClassCastException when registering custom node type by XML file
  [JCR-1766] Bundle binding deserialization problem
  
  Known issues
  [JCR-43]   Restore on nodes creates same-name-sibling of ...
  [JCR-320]  BinaryValue equals fails for two objects with ...
  [JCR-392]  Querying element by number does not work
  [JCR-435]  Node.update() does not work correct for SNS
  [JCR-449]  inconsistency in internal version items during commits
  [JCR-517]  Reserved status of namespace jcr not enforced
  [JCR-522]  XPath parser too tolerant
  [JCR-537]  Failure to remove a versionable node
  [JCR-538]  failing Node.checkin() or Node.checkout() might leave ...
  [JCR-566]  Versioning bug with restore and transactions
  [JCR-575]  unicode escapes in files generated by JJTree
  [JCR-591]  XPath position function does not work
  [JCR-639]  Allow modification of OPV=IGNORE items even if parent ...
  [JCR-643]  Own AccessManager + VersionManager : AccessDenied problem
  [JCR-690]  Nodes' and properties' names with invalid XML ...
  [JCR-709]  ArrayStoreException is thrown when jcr:deref() is used ...
  [JCR-777]  Order by clause using child axis does not throw ...
  [JCR-843]  XPath does not work with sub-axes
  [JCR-888]  javax.jcr.NamespaceException: : is not a registered namespace uri
  [JCR-908]  Unable to properly restore a previous version of a node that ...
  [JCR-932]  Lossy SQL parsing
  [JCR-935]  ConcurrentModificationException during logout (cont'd)
  [JCR-936]  Using Oracle bundle PM throws SQL exception (cannot insert NULL)
  [JCR-983]  fn:upper accepted in too many places
  [JCR-1002] QueryManager does not throw exception if property name ...
  [JCR-1117] Bundle cache is not rolled back when the storage of a ...
  [JCR-1135] boolean value constraints exposed in custom format
  [JCR-1173] Session scoped lock has no effect on other cluster nodes
  [JCR-1187] Asking a property twice for it's stream returns the same ...
  [JCR-1211] QueryManager does not throw exception if jcr:deref is used in ...
  [JCR-1223] Occasional NPE on node checkin
  [JCR-1248] ParseException if search string ends with '!'
  [JCR-1334] Deadlock with XA enabled
  [JCR-1360] Parsing built-in CND and XML nodetypes does not result in ...
  [JCR-1367] Exception when closing connection under db2
  [JCR-1387] Lock token not removed from session when node is removed
  [JCR-1440] NPE Thrown when two Cluster Nodes are hitting the same ...
  [JCR-1532] ERROR 40XD0: Container has been closed exception with Derby DB
  [JCR-1553] ClusterNode not properly shutdown when repository has shutdown
  [JCR-1554] StaleItemStateException with distributed transactions
  [JCR-1558] Namespace not registered yet prevent ...
  [JCR-1563] Data Store: UTFDataFormatException when using large ...
  [JCR-1572] DbDataStore connection does not always reconnect
  [JCR-1573] Lucene Query Exception: 'attempt to access a deleted ...
  [JCR-1605] RepositoryLock does not work on NFS sometimes
  [JCR-1613] REMOVE access is not checked when moving a node
  [JCR-1626] The resource committed at the first server via WebDAV does ...
  [JCR-1633] When node is created and locked in same transaction, ...
  [JCR-1634] In XA transaction session.addLockToken() does not have effect
  [JCR-1637] The GarbageCollector ignores InterruptedException and so ...
  [JCR-1648] Database reconnect during shutdown
  [JCR-1660] Consistency check / fix skips system nodes
  [JCR-1666] After transaction rollback session may become 'corrupt'
  [JCR-1668] After RepositoryImpl instance has been created and shut ...
  [JCR-1670] NPE when clustered JR queries version history on a node that ...
  [JCR-1693] JNDIDatabaseJournal doesn't work with "oracle" schema ...
  [JCR-1694] System properties does not get replaced in a Cluster ...
  [JCR-1703] Oracle JNDI DataSource support
  [JCR-1707] Node.setProperty(String, String, PropertyType.UNDEFINED) ...
  [JCR-1714] QueryImpl result offSet must be considered after security ...
  [JCR-1729] Node#addNode failes with AccessDeniedException if session ...
  [JCR-1731] Session.checkPermission("/", "add_node") throws ...
  [JCR-1734] Generated cluster node id should be persisted

