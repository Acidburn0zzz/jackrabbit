<?xml version="1.0" ?>
<chains>
	<catalog name="test">

		<command name="clear" 
			className="org.apache.jackrabbit.chain.command.ClearWorkspace" />
		
		<chain name="addTestNodeWithKey">
			<command name="copyNodeName" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="test" 
				toKey="name"/>
			<command name="copyNodeType" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="nt:unstructured" 
				toKey="nodeType"/>
			<command name="addnode" 
				className="org.apache.jackrabbit.chain.command.AddNode" 
				nodeNameKey="name" 
				nodeTypeKey="nodeType"/>
		</chain>
		
		<command name="addTestNode" 
			className="org.apache.jackrabbit.chain.command.AddNode" 
			nodeName="test" 
			nodeType="nt:unstructured"/>

		<command name="collect" 
			className="org.apache.jackrabbit.chain.command.CollectNodes"
			depth="1" 
			namePattern="*"
			toKey="children"/>

		<chain name="collectWithKey">
			<command name="copyNodeName" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="1" 
				toKey="depth"/>
			<command name="copyNodeType" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="*" 
				toKey="namePattern"/>
			<command name="collect" 
				className="org.apache.jackrabbit.chain.command.CollectNodes" 
				depthKey="depth" 
				namePatternKey="namePattern"
				toKey="children"/>
		</chain>
					
		<command name="cd" 
			className="org.apache.jackrabbit.chain.command.CurrentNode" 
			path="test" />

		<chain name="cdWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="test" 
				toKey="path"/>
			<command name="cdTest" 
				className="org.apache.jackrabbit.chain.command.CurrentNode" 
				pathKey="path" />
		</chain>
		
		<command name="exportDoc" 
			className="org.apache.jackrabbit.chain.command.xml.ExportDocViewToFile" 
			to="applications/test/export.xml" 
			overwrite="true"/>

		<chain name="exportDocWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="applications/test/export.xml" 
				toKey="file"/>
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="true" 
				toKey="overwrite"/>
			<command name="exportDoc" 
				className="org.apache.jackrabbit.chain.command.xml.ExportDocViewToFile" 
				toKey="file" 
				overwriteKey="overwrite"/>
		</chain>

		<command name="exportSys" 
			className="org.apache.jackrabbit.chain.command.xml.ExportSysViewToFile" 
			to="applications/test/export.xml" 
			overwrite="true"/>

		<chain name="exportSysWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="applications/test/export.xml" 
				toKey="file"/>
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="true" 
				toKey="overwrite"/>
			<command name="exportSys" 
				className="org.apache.jackrabbit.chain.command.xml.ExportSysViewToFile" 
				toKey="file" 
				overwriteKey="overwrite"/>
		</chain>

		<command name="read" 
			className="org.apache.jackrabbit.chain.command.ReadValue" 
			path="jcr:primaryType" 
			toKey="value"/>

		<chain name="readWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="jcr:primaryType" 
				toKey="path"/>
			<command name="read" 
				className="org.apache.jackrabbit.chain.command.ReadValue" 
				pathKey="path" 
				toKey="value"/>
		</chain>

		<command name="remove" 
			className="org.apache.jackrabbit.chain.command.RemoveItem" 
			path="test" />

		<chain name="removeWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="test" 
				toKey="path"/>
			<command name="remove" 
				className="org.apache.jackrabbit.chain.command.RemoveItem" 
				pathKey="path" />
		</chain>

		<command name="removeItems" 
			className="org.apache.jackrabbit.chain.command.RemoveItems" 
			pattern="test" />

		<chain name="removeItemsWithKey">
			<command name="copy" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="test" 
				toKey="pattern"/>
			<command name="remove" 
				className="org.apache.jackrabbit.chain.command.RemoveItems" 
				patternKey="pattern" />
		</chain>

		<command name="setProp" 
			className="org.apache.jackrabbit.chain.command.SetProperty" 
			propertyName="testProp"
			value="testValue" />

		<chain name="setPropWithKey">
			<command name="copy1" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="testProp" 
				toKey="propertyName"/>
			<command name="copy2" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="testValue" 
				toKey="propertyValue"/>
			<command name="setProp" 
				className="org.apache.jackrabbit.chain.command.SetProperty" 
				propertyNameKey="propertyName"
				valueKey="propertyValue" />
		</chain>
		

		<command name="setPropFromFile" 
			className="org.apache.jackrabbit.chain.command.fs.SetPropertyFromFile" 
			propertyName="testProp"
			value="applications/test/testSetPropertyFromFile.txt" />

		<chain name="setPropFromFileWithKey">
			<command name="copy1" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="testProp" 
				toKey="propertyName"/>
			<command name="copy2" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="applications/test/testSetPropertyFromFile.txt" 
				toKey="propertyValue"/>
			<command name="setProp" 
				className="org.apache.jackrabbit.chain.command.fs.SetPropertyFromFile" 
				propertyNameKey="propertyName"
				valueKey="propertyValue" />
		</chain>	
		
		<command name="setMultiProp" 
			className="org.apache.jackrabbit.chain.command.SetMultivalueProperty" 
			propertyName="testProp"
			value="testValue,testValue1" />

		<chain name="setMultiPropWithKey">
			<command name="copy1" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="testProp" 
				toKey="propertyName"/>
			<command name="copy2" 
				className="org.apache.commons.chain.generic.CopyCommand" 
				value="testValue,testValue1" 
				toKey="propertyValue"/>
			<command name="setProp" 
				className="org.apache.jackrabbit.chain.command.SetMultivalueProperty" 
				propertyNameKey="propertyName"
				valueKey="propertyValue" />
		</chain>				
				
	</catalog>
</chains>