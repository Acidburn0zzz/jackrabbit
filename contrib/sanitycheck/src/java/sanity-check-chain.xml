<?xml version="1.0" encoding="UTF-8"?>
<chains>
  <!-- Checks -->
  <catalog name="sanitycheck">
	  <!-- Chain of checks to run against the versioning PM -->
	  <chain name="versioning">
		  <command 
			name="CheckTree"
			className="org.apache.jackrabbit.sanitycheck.check.CheckTree"/>
		  <command 
			name="CheckParentsExist"
			className="org.apache.jackrabbit.sanitycheck.check.CheckParentsExist"/>
	  </chain>
	  
	  <!-- Chain of checks to run against every workspace PM -->
	  <chain name="workspace">
		  <command 
			name="CheckTree"
			className="org.apache.jackrabbit.sanitycheck.check.CheckTree"/>
		  <command 
			name="CheckReferenceProperty"
			className="org.apache.jackrabbit.sanitycheck.check.CheckReferenceProperty"/>
		  <command 
			name="CheckParentsExist"
			className="org.apache.jackrabbit.sanitycheck.check.CheckParentsExist"/>
	  </chain>
	  
  </catalog>  
  
  <!-- 
	/ Fixes
	/ name=Class name of the Inconsistency
	/ className= Fix implementor
	-->  
  <catalog name="fixes">
	
	  <command 
		name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.NoSuchChildInconsistency"
		className="org.apache.jackrabbit.sanitycheck.fix.RemoveChildNodeEntry"/>

	  <command 
		name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.UnableToReadNodeInconsistency"
		className="org.apache.jackrabbit.sanitycheck.fix.RemoveChildNodeEntry"/>

	  <command 
		name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.NoSuchPropertyInconsistency"
		className="org.apache.jackrabbit.sanitycheck.fix.RemovePropertyEntry"/>

	  <command 
		name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.UnableToReadPropertyInconsistency"
		className="org.apache.jackrabbit.sanitycheck.fix.RemovePropertyEntry"/>

	  <chain name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.NoSuchReferencedNodeInconsistency">
		<!-- Remove the value (only single value property) -->
		  <command 
			name="removeValueIfSingleProperty"
			className="org.apache.jackrabbit.sanitycheck.fix.RemoveValue"/>
		<!-- Remove the property (multivalued property) -->
		  <chain name="removePropertyEntryAndProperty">
			  <!-- 
				the completed attribute tells the Fix 
				that it must delegate the process to 
				the next command in the chain
				-->
			  <command 
				name="removePropertyEntry"
				className="org.apache.jackrabbit.sanitycheck.fix.RemovePropertyEntry"
				completed="false" />
			  <command 
				name="removeProperty"
				className="org.apache.jackrabbit.sanitycheck.fix.RemoveProperty"/>
		  </chain>
	  </chain>	

	  <chain name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.NotReferenceableInconsistency">
		<!-- Remove the value (only single value property) -->
		  <command 
			name="removeValueIfSingleProperty"
			className="org.apache.jackrabbit.sanitycheck.fix.RemoveValue"/>
		<!-- Remove the property (multivalued property) -->
		  <chain name="removePropertyEntryAndProperty">
			  <command 
				name="removePropertyEntry"
				className="org.apache.jackrabbit.sanitycheck.fix.RemovePropertyEntry"
				completed="false" />
			  <command 
				name="removeProperty"
				className="org.apache.jackrabbit.sanitycheck.fix.RemoveProperty"/>
		  </chain>
	  </chain>	

	  <command 
		name="org.apache.jackrabbit.sanitycheck.inconsistency.impl.NoSuchParentInconsistency"
		className="org.apache.jackrabbit.sanitycheck.fix.RemoveParentEntry"/>

  </catalog>    
  
</chains>